<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Focusgroup</title>
    <link rel="stylesheet" href="style.css" />
    <script type="module" src="main.js"></script>
  </head>
  <body>
    <h1>Testing focusgroups</h1>
    <p>
      This is a test page for a focusgroup implementation that works across
      shadow dom boundaries according to the
      <a href="https://open-ui.org/components/focusgroup.explainer/"
        >non active Open UI focusgroup explainer</a
      >.
    </p>
    <button>First focus</button>

    <h2>Regular focusgroup</h2>
    <div focusgroup>
      <button id="regular-focusgroup-button-1">Button 1</button>
      <button id="regular-focusgroup-button-2">Button 2</button>
      <button>Button 3</button>
      <button>Button 4</button>
      <button id="regular-focusgroup-button-5">Button 5</button>
    </div>

    <h2>RTL focusgroup</h2>
    <div dir="rtl" focusgroup>
      <button id="rtl-focusgroup-button-1">Button 1</button>
      <button id="rtl-focusgroup-button-2">Button 2</button>
      <button>Button 3</button>
      <button>Button 4</button>
      <button id="rtl-focusgroup-button-5">Button 5</button>
    </div>

    <h2>Horizontal focusgroup</h2>
    <div focusgroup="horizontal">
      <button id="horizontal-focusgroup-button-1">Button 1</button>
      <button id="horizontal-focusgroup-button-2">Button 2</button>
      <button>Button 3</button>
      <button>Button 4</button>
      <button id="horizontal-focusgroup-button-5">Button 5</button>
    </div>

    <h2>Vertical focusgroup</h2>
    <div class="vertical" focusgroup="vertical">
      <button id="vertical-focusgroup-button-1">Button 1</button>
      <button id="vertical-focusgroup-button-2">Button 2</button>
      <button>Button 3</button>
      <button>Button 4</button>
      <button id="vertical-focusgroup-button-5">Button 5</button>
    </div>

    <h2>Wrong usage of horizontal and vertical focusgroup</h2>
    <div focusgroup="horizontal vertical">
      <button id="wrong-hv-focusgroup-button-1">Button 1</button>
      <button id="wrong-hv-focusgroup-button-2">Button 2</button>
      <button>Button 3</button>
      <button>Button 4</button>
      <button id="wrong-hv-focusgroup-button-5">Button 5</button>
    </div>

    <h2>Vertical nested in horizontal</h2>
    <div class="navigation" focusgroup>
      <div focusgroup="extend horizontal">
        <button>Button 1</button>
        <div class="vertical" focusgroup="extend vertical">
          <button>Nav item 1</button>
          <button>Nav item 2</button>
          <button>Nav item 3</button>
          <button>Nav item 4</button>
          <button>Nav item 5</button>
        </div>
      </div>
      <div focusgroup="extend horizontal">
        <button>Button 2</button>
        <div class="vertical" focusgroup="extend vertical">
          <button>Nav item 1</button>
          <button>Nav item 2</button>
          <button>Nav item 3</button>
          <button>Nav item 4</button>
          <button>Nav item 5</button>
        </div>
      </div>
      <div focusgroup="extend horizontal">
        <button>Button 3</button>
        <div class="vertical" focusgroup="extend vertical">
          <button>Nav item 1</button>
          <button>Nav item 2</button>
          <button>Nav item 3</button>
          <button>Nav item 4</button>
          <button>Nav item 5</button>
        </div>
      </div>
    </div>
    <ul>
      <li>
        Current implementation does not search for same direction next/prev
        elements, therefore this use case is broken
      </li>
      <li>
        horizontal direction on the top level is contradicting because a down
        arrow press should go to the sub-menu but with the horizontal option,
        down arrow is not active
      </li>
    </ul>

    <h2>Wrapping focusgroup</h2>
    <div focusgroup="wrap">
      <button>Button 1</button>
      <button>Button 2</button>
      <button>Button 3</button>
      <button>Button 4</button>
      <button>Button 5</button>
    </div>

    <h2>Shadow Dom focusgroup</h2>
    <div>
      <template shadowrootmode="open">
        <div focusgroup part="shadow">
          <button>Shadow button 1</button>
          <button>Shadow button 2</button>
          <button>Shadow button 3</button>
          <button>Shadow button 4</button>
          <button>Shadow button 5</button>
        </div>
      </template>
    </div>

    <h2>Nested shadow DOM focusgroup</h2>
    <div>
      <template shadowrootmode="open">
        <div focusgroup part="shadow">
          <button>Shadow button 1</button>
          <div>
            <template shadowrootmode="open">
              <div focusgroup="extend" part="shadow">
                <button>Shadow button 2</button>
                <div>
                  <template shadowrootmode="open">
                    <div focusgroup="extend" part="shadow">
                      <button>Shadow button 3</button>
                      <div>
                        <template shadowrootmode="open">
                          <div focusgroup="extend" part="shadow">
                            <button>Shadow button 4</button>
                            <div>
                              <template shadowrootmode="open">
                                <div focusgroup="extend" part="shadow">
                                  <button>Shadow button 5</button>
                                </div>
                              </template>
                            </div>
                          </div>
                        </template>
                      </div>
                    </div>
                  </template>
                </div>
              </div>
            </template>
          </div>
        </div>
      </template>
    </div>

    <h2>Light dom focusgroup with shadow dom items</h2>
    <div focusgroup>
      <template shadowrootmode="open">
        <button>Shadow button 1</button>
        <button>Shadow button 2</button>
        <button>Shadow button 3</button>
        <button>Shadow button 4</button>
        <button>Shadow button 5</button>
      </template>
    </div>

    <h2>Focusgroup in shadow dom with slotted items</h2>
    <div>
      <template shadowrootmode="open">
        <div part="shadow">
          <slot focusgroup></slot>
        </div>
      </template>
      <button>Shadow button 1</button>
      <button>Shadow button 2</button>
      <button>Shadow button 3</button>
      <button>Shadow button 4</button>
      <button>Shadow button 5</button>
    </div>

    <h2>Mixed light dom, shadow dom and slotted</h2>
    <p>Complicated use-case</p>
    <div focusgroup>
      <button>1</button>
      <button>2</button>
      <span>
        <template shadowrootmode="open">
          <span focusgroup="extend" part="shadow">
            <button>3</button>
            <button>4</button>
            <slot focusgroup="extend"></slot>
          </span>
        </template>
        <button>5</button>
        <button>6</button>
      </span>
    </div>

    <h2>Nested focusgroup</h2>
    <div focusgroup>
      <button>Button 1</button>
      <button>Button 2</button>
      <button>Button 3</button>
      <div focusgroup="extend">
        <button>Nested Button 1</button>
        <button>Nested Button 2</button>
        <button>Nested Button 3</button>
        <button>Nested Button 4</button>
        <button>Nested Button 5</button>
      </div>
      <button>Button 4</button>
      <button>Button 5</button>
    </div>

    <h2>Nested shadow focusgroup</h2>
    <div focusgroup>
      <button>Button 1</button>
      <button>Button 2</button>
      <button>Button 3</button>
      <div>
        <template shadowrootmode="open">
          <div focusgroup="extend" part="shadow">
            <button>Nested Button 1</button>
            <button>Nested Button 2</button>
            <button>Nested Button 3</button>
            <button>Nested Button 4</button>
            <button>Nested Button 5</button>
          </div>
        </template>
      </div>
    </div>

    <h2>Deeply nested focusgroup</h2>
    <div focusgroup>
      <button>Button 1</button>
      <button>Button 2</button>
      <button>Button 3</button>
      <div>
        <div>
          <div>
            <div focusgroup="extend">
              <button>Nested Button 1</button>
              <button>Nested Button 2</button>
              <button>Nested Button 3</button>
              <button>Nested Button 4</button>
              <button>Nested Button 5</button>
            </div>
          </div>
        </div>
      </div>
      <button>Button 4</button>
      <button>Button 5</button>
    </div>

    <h2>Weird invalid markup example</h2>
    <div focusgroup>
      <button>
        I'm a button with links 1
        <span focusgroup="extend">
          <a href="http://">Link 1</a>
          <a href="http://">Link 2</a>
          <a href="http://">Link 3</a>
          <a href="http://">Link 4</a>
          <a href="http://">Link 5</a>
        </span>
      </button>
      <button>
        I'm a button with links 2
        <span focusgroup="extend">
          <a href="http://">Link 1</a>
          <a href="http://">Link 2</a>
          <a href="http://">Link 3</a>
          <a href="http://">Link 4</a>
          <a href="http://">Link 5</a>
        </span>
      </button>
      <button focusgroup="extend">
        I'm a button with links 3
        <a href="http://">Link 1</a>
        <a href="http://">Link 2</a>
        <a href="http://">Link 3</a>
        <a href="http://">Link 4</a>
        <a href="http://">Link 5</a>
      </button>
    </div>

    <ul>
      <li>when going back, the top level buttons are skipped</li>
      <li>
        when reaching the end, a maximum call stack size exceeded error appears
      </li>
    </ul>

    <h2>Different focusable elements</h2>
    <div focusgroup>
      <button>Button 1</button>
      <button>Button 2</button>
      <a href="#">Link 1</a>
      <input type="text" />
      <span tabindex="0">Span tabindex</span>
      <span contenteditable="">Contenteditable</span>
      <button>Button 3</button>
      <textarea name="" id="" cols="30" rows="10"></textarea>
      <button>Button 3</button>
      <!-- <audio
        controls
        src="https://github.com/rafaelreis-hotmart/Audio-Sample-files/raw/master/sample.mp3"
      ></audio>
      <button>Button 3</button>
      <video width="400" controls>
        <source
          src="https://www.w3schools.com/html/mov_bbb.mp4"
          type="video/mp4"
        />
        <source
          src="https://www.w3schools.com/html/mov_bbb.ogg"
          type="video/ogg"
        />
        Your browser does not support HTML video.
      </video> -->
      <button>Button 3</button>
      <details focusgroup="extend">
        <summary>Summary</summary>
        Details
      </details>
      <button>Button 3</button>
      <input type="text" />
      <button>Button 3</button>
      <select name="" id="">
        <option value="">Option 1</option>
        <option value="">Option 2</option>
        <option value="">Option 3</option>
        <option value="">Option 4</option>
      </select>
      <button>Button 3</button>
    </div>
    <ul>
      <li>
        Input text in focusgroup disables moving the cursor inside the textfield
      </li>
      <li>The select element is a focusgroup trap</li>
      <li>Audio elements have conflicting usage of arrow keys</li>
      <li>Video is a focusgroup trap</li>
      <li>
        In details/summary, the focusable element is not a child of the
        focusgroup, the details element needs to have an extending focusgroup
      </li>
    </ul>

    <h2>Not focusgroups</h2>
    <div>
      <template shadowrootmode="open">
        <div part="shadow">
          <slot></slot>
        </div>
      </template>
      <button>Shadow button 1</button>
      <button>Shadow button 2</button>
      <details>
        <summary>Summary</summary>
        Details
      </details>
    </div>
    <button>Last focus</button>
  </body>
</html>
